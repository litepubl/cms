Следующей, после отправки комментария, находится форма подтверждения оного. Зададим шаблон для формы подтверждения:
Этот шаблон, хоть формально и является вложенным в форму комментирования, но по сути является прицепом к форме отправки комментария. Шаблон content.post.templatecomments.form.js добавяется форме без регистрации content.post.templatecomments.form и к форме для залогиненных поситителей content.post.templatecomments.form движком сайта. Если комментирование закрыто, то формы комментирования не будет и не будет этого шаблона.

Разберем шаблон с конца, где подключаются скрипты управления комментариями $site.files$template.jsmerger_comments. Скрипт обрабатывает нажатия кнопок цитирования в списке комментариев. Эти кнопки цитирования имеют смысл только при открытом комментировании.

Скрипт первоначально настроен для работы с темой по умолчанию. Чтобы ваша тема могла интегрироваться с скриптами комментирования необходимо в шаблоне передать соответствующие селекторы jquery. Здесь, в теме по умолчанию, скрипт для такой связи выглядит скромно и не содержит селекторов:
  ltoptions.theme.comments = $.extend(true, ltoptions.theme.comments, $params);

В объяснениях нуждается тег $params - о нем чуть ниже. Чтобы передать селекторы скрипту комментариев наш код может выглядеть так:

  ltoptions.theme.comments = $.extend(true, ltoptions.theme.comments, {
        // список комментариев в виде селектора (включает символ # для id списка)
        comments: "#commentlist",
        // селектор списка задержанных комментариев, включая символ# для id
        hold: "#holdcommentlist",
        // селектор одиночного комментария, полный получается если прибавить id, пример#comment-357
        comment: "#comment-",
        // селектор текста комментария, к нему прибавляется id, пример #commentcontent-357
        content: "#commentcontent-",
        // селектор владельца, куда будут вставлены кнопки модерирования, в теме по умолчанию это <div class="moderationbuttons" ...
        buttons:".moderationbuttons",
        // шаблон кнопки модерирования, %%title%% будет заменен на название кнопки (одобрить, задержать, редактировать, удалить)
        button: '<button type="button" class="button"><span>%%title%%</span></button>',
        //класс кнопки "Ответить"
        replyclass: "replycomment",
        //клас кнопки "Цитировать"
quoteclass : "quotecomment",
        // селектор формы комментариев, здесь id тега form
        form: "#commentform",
        // селектор редактора, то есть textarea формы
        editor: "#comment"
}, $params);
      
Естественно, что в вашей теме не потребуется указывать все эти селекторы, если они совпадают с темой по умолчанию. Например, если у вас будет другой только шаблон кнопки модерирования, то достаточно указать только ее одну:

<script type="text/javascript"> ltoptions.theme.comments = $.extend(true, ltoptions.theme.comments, {
        button: '<a href=#">%%title%%</a>'
      });
</script>

Напомним, что этот скрипт следует добавлять к шаблону content.post.templatecomments.regform задекларированный ранее.



