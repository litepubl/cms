(function(c,f,g){litepubl.Posteditor=Class.extend({tabs:!1,init:function(){this.tabs=c("#tabs");if(this.tabs.length){var a=this;litepubl.tabs.tabs(this.tabs,{before:function(c){a.init_tab(c)}});c("#posteditor-init-files").one("click.initfiles",function(){litepubl.fileman=new litepubl.Fileman("#posteditor-files");return!1});this.tabs.closest("form").on("submit.posttitle",function(a){var b=c("input[name='title']",this);c.trim(b.val())||(a.stopImmediatePropagation(),a.preventDefault(),c.messagebox(lang.dialog.error,
lang.posteditor.emptytitle,function(){b.focus()}))})}},init_tab:function(a){if(!a.data("init.litepubl"))switch(a.data("init.litepubl",!0),a.attr("data-id")){case "tags":var d=this;a.on("click.tag","a",function(){d.addtag(c(this).text());return!1});break;case "posted":for(var b=a.get(0).firstChild;8!=b.nodeType;)b=b.nextSibling;a.html(b.nodeValue);litepubl.calendar.on(a);break;case "seo":for(b=a.get(0).firstChild;8!=b.nodeType;)b=b.nextSibling;a.html(b.nodeValue)}},addtag:function(a){var d=c("#text-tags").val();
if(""==d)c("#text-tags").val(a);else{for(var b=d.split(/\s*,\s*/),e=b.length;0<=e;e--)if(a==b[e])return!1;c("#text-tags").val(d+", "+a)}}});c(f).ready(function(){try{litepubl.posteditor=new litepubl.Posteditor}catch(a){erralert(a)}})})(jQuery,document,window);
