(function(b,f,g){litepubl.Posteditor=Class.extend({tabs:!1,init:function(){var a=b("#tabs");a.length&&(this.init_tabs(a),this.ontitle(a.closest("form")))},init_tabs:function(a){this.tabs=a;var c=this;litepubl.tabs.on(a,{before:function(a){c.init_tab(a.panel)}})},init_tab:function(a){if(!a.data("init.litepubl"))switch(a.data("init.litepubl",!0),a.attr("data-id")){case "tags":var c=this;a.on("click.tag","a",function(){c.addtag(b(this).text());return!1});break;case "posted":a.extractComment();litepubl.calendar.on(a);
break;case "seo":a.extractComment()}},addtag:function(a){var c=b("#text-tags").val();if(""==c)b("#text-tags").val(a);else{for(var d=c.split(/\s*,\s*/),e=d.length;0<=e;e--)if(a==d[e])return!1;b("#text-tags").val(c+", "+a)}},ontitle:function(a){a.on("submit.posttitle",function(a){var d=b("input[name='title']",this);b.trim(d.val())||(a.stopImmediatePropagation(),a.preventDefault(),b.messagebox(lang.dialog.error,lang.posteditor.emptytitle,function(){d.focus()}))})}});b(f).ready(function(){try{litepubl.posteditor=
new litepubl.Posteditor}catch(a){erralert(a)}})})(jQuery,document,window);
