(function(a,l){a.BootstrapDialog=Class.extend({dialog:!1,footer:!1,style:!1,options:!1,padwidth:32,padheight:0,removeOnclose:!0,tml:'<div class="modal fade" id="dialog-%%id%%" tabindex="-1" role="dialog" aria-labelledby="modal-title-%%id%%"><div class="modal-dialog" role="document"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="%%close%%"><span aria-hidden="true">&times;</span><span class="sr-only">%%close%%</span></button><h4 class="modal-title" id="modal-title-%%id%%">%%title%%</h4></div><div class="modal-body">%%body%%</div><div class="modal-footer">%%buttons%%</div></div></div></div>',
button:'<button type="button" class="btn btn-default" id="button-%%id%%-%%index%%" data-index="%%index%%">%%icon%%%%title%%</button>',init:function(){var b=a.proxy(this.close,this);a.closedialog=b;a.litedialog=a.proxy(this.open,this);this.default_options={title:"",html:"",css:"",width:!1,height:!1,open:a.noop,close:a.noop,buttons:[{title:"Ok",click:b}]}},close:function(b){if(!this.dialog)return!1;if(a.isFunction(b))this.dialog.on("hidden.bs.modal",function(){setTimeout(function(){b()},20)});this.dialog.modal("hide")},
doclose:function(){this.dialog&&a.isFunction(this.options.close)&&this.options.close(this.dialog);this.removeOnclose&&this.remove()},remove:function(){if(!this.dialog)return!1;this.trigger("remove");this.footer=this.options=!1;this.dialog.find(".tooltip-toggle, .tooltip-ready").tooltip("destroy");this.dialog.find(".popover-toggle").popover("destroy");this.dialog.remove();this.dialog=!1;this.style&&(this.style.remove(),this.style=!1)},closetips:function(){"closetooltips"in a&&a.closetooltips();"closepopovers"in
a&&a.closepopovers()},addstyle:function(){var b=this.options,c=b.css;b.width&&(c=c+".modal-dialog{width:"+(b.width+this.padwidth)+"px}");b.height&&(c=c+".modal-dialog{height:"+(b.height+this.padheight)+"px}");b.buttons.length||(c+=".modal-footer{display:none}");c&&(this.style=a('<style type="text/css">'+c+"</style>").appendTo("head:first"))},open:function(b){if(this.dialog){var c=this;setTimeout(function(){c.dialog?alert("Dialog already opened"):c.open(b)},300)}else{this.closetips();var e=l.guid++;
this.options=a.extend({},this.default_options,b);for(var f=this.options.buttons,g="",d=0,h=f.length;d<h;d++)var k=f[d],g=g+a.simpletml(this.button,{index:d,id:e,title:k.title,icon:"icon"in k?k.icon:""});1==f.length&&(g=g.replace(/btn-default/g,"btn-primary"));d=a.simpletml(this.tml,{id:e,title:this.options.title,close:lang.dialog.close,body:this.options.html,buttons:g});this.addstyle();e=this.dialog=a(d).appendTo("body");this.footer=a(".modal-footer:first",e);d=0;for(h=f.length;d<h;d++)this.getbutton(d).on("click.dialog",
f[d].click);return e.fixAndroid().on("shown.bs.modal.dialog",a.proxy(this.opened,this)).on("hidden.bs.modal.dialog",a.proxy(this.doclose,this)).modal()}},opened:function(){a.isFunction(this.options.open)&&this.options.open(this.dialog);this.trigger("opened")},trigger:function(b){this.dialog.trigger(a.Event(b+".dialog.litepubl",{target:this.dialog[0],dialog:this}))},getbutton:function(a){return this.footer?this.footer.find("button[data-index="+a+"]"):!1},geticon:function(a){if(!a)return"";var c={info:"info-circle",
success:"check",danger:"times-circle",error:"times-circle"};a in c&&(a=c[a]);return'<span class="fa fa-'+a+'"></span>'}});a.ready2(function(){"modal"in a.fn&&(a.bootstrapDialog=new a.BootstrapDialog)})})(jQuery,litepubl);
