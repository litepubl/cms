(function(c,g,d){d.bootstrap=d.bootstrap||{};d.bootstrap.Tabs=Class.extend({namespace:".litepubl.tabs",init:function(){var a=this;c(g).on("show.bs.tab",function(b){b=c(b.target);a.before(b);a.trigger("before",b)}).on("shown.bs.tab",function(b){a.trigger("activated",c(b.target))});a=this;this.navtabs(c(c(".admintabs>.nav-tabs").toArray().reverse()))},tabs:function(a,b){this.navtabs(a.children(".nav-tabs"));this.on(a,b)},navtabs:function(a){return a.each(function(){var a=c(this);a.children(".active").length||
a.find("a:first").click()})},before:function(a){var b=a.attr("data-ajax");b&&!a.data("loaded")&&this.load(a,b)},getpanel:function(a){var b=c(a.data("target")||a.attr("data-target")||this.striphref(a.attr("href"))||"#"+a.attr("aria-controls"));b&&a.data("target",b);return b},load:function(a,b){a.data("loaded","loading");var f=d.tml.bootstrap.tabs;a.data("spin",c(f.spin).prependTo(a));var e=this.getpanel(a);if(!e.length){var g=a.closest("ul").parent().children(".tab-content:first"),f=f.tab.replace(/%%id%%/gim,
d.guid++),e=c(f).appendTo(g);a.data("target",e)}e.attr("aria-busy","true");this.trigger("beforeLoad",a);var h=this;return c.ajax(this.getajax(b,function(b){e.html(b);h.trigger("loaded",a)})).always(function(){e.removeAttr("aria-busy");a.data("loaded","loaded");a.data("spin").remove();a.removeData("spin")}).fail(function(a,b,c){alert(a.responseText)})},getajax:function(a,b){return{type:"get",url:a,cache:!1,dataType:"html",success:b}},striphref:function(a){return a?a.replace(/.*(?=#[^\s]*$)/,""):""},
gettml:function(){return d.tml.bootstrap.tabs},on:function(a,b){if(a&&b)for(var c in b)a.on(c+this.namespace,b[c])},off:function(a){a.off(this.namespace)},trigger:function(a,b){var d=this.getpanel(b);b.closest(".admintabs").trigger(c.Event(a+this.namespace,{target:b[0],relatedTarget:d[0],panel:d}))},setenabled:function(a,b){b?(a.attr("data-toggle","tab"),a.removeAttr("aria-disabled"),a.parent().removeClass("disabled"),a.off("click.disabled")):(a.attr("data-toggle","disabled"),a.attr("aria-disabled",
"true"),a.parent().addClass("disabled"),a.on("click.disabled",function(){return!1}))}});c(function(){d.tabs=new d.bootstrap.Tabs})})(jQuery,document,litepubl);
