(function(c,f,d){d.bootstrap=d.bootstrap||{};d.bootstrap.Tabs=Class.extend({init:function(){var a=this;c(f).on("show.bs.tab",function(b){b=c(b.target);a.before(b);a.event("before",b)}).on("shown.bs.tab",function(b){a.event("activated",c(b.target))});this.navtabs(c(c(".nav-tabs").toArray().reverse()))},tabs:function(a,b){this.navtabs(a.children(".nav-tabs"));b&&a.data("tabevents.litepubl",b)},navtabs:function(a){return a.each(function(){var a=c(this);a.children(".active").length||a.find("a:first").click()})},
before:function(a){var b=a.attr("data-ajax");b&&!a.data("loaded")&&this.load(a,b)},getpanel:function(a){var b=c(a.data("target")||a.attr("data-target")||this.striphref(a.attr("href"))||"#"+a.attr("aria-controls"));b&&a.data("target",b);return b},load:function(a,b){a.data("loaded","loading");var g=d.tml.bootstrap.tabs;a.data("spin",c(g.spin).prependTo(a));var e=this.getpanel(a);if(!e.length){var f=a.closest("ul").parent().children(".tab-content:first"),g=g.tab.replace(/%%id%%/gim,d.guid++),e=c(g).appendTo(f);
a.data("target",e)}e.attr("aria-busy","true");var h=this;return c.ajax(this.getajax(b,function(b){e.html(b);h.event("loaded",a)})).always(function(){e.removeAttr("aria-busy");a.data("loaded","loaded");a.data("spin").remove();a.removeData("spin")}).fail(function(a,b,c){alert(a.responseText)})},getajax:function(a,b){return{type:"get",url:a,cache:!1,dataType:"html",success:b}},striphref:function(a){return a?a.replace(/.*(?=#[^\s]*$)/,""):""},add:function(){},on:function(a,b){a.data("tabevents.litepubl",
b)},off:function(a){a.data("tabevents.litepubl",!1)},event:function(a,b){var c=b.closest(".adminpanel").data("tabevents.litepubl");if(c&&a in c)c[a](this.getpanel(b))}});c(f).ready(function(){d.tabs=new d.bootstrap.Tabs})})(jQuery,document,litepubl);
