(function(d,h,k,f){f.BootstrapWidgets=Class.extend({toggleclass:"fa-expand fa-collapse",tml_wrap_collapse:'<a class="dashed tooltip-toggle" href="%%idcontent%%" title="%%lang.clickme%%"></a>',init:function(a){a=d.extend({button:".widget-button, .widget-title",inline:".widget-inline",ajax:".widget-ajax",toggle:this.toggleclas},a);var b=this;b.toggleclass=a.toggle;var c=a.inline+","+a.ajax;d(a.button).each(function(){var a=d(this),g=a.find(c);if(g.length)return b.init_button(a,g);switch(a.attr("data-model")){case "dropdown":a.dropdown();
break;case "collapse":a.collapse();break;case "slide":a.on("click.widget",function(){d(this).next().slideToggle();return!1})}})},init_button:function(a,b){a.data("span",b);if("widget-collapse"==a.data("model")){var c="#widget-content-"+b.data("widget").id;d(c).addClass("panel-collapse");b.wrap(d.parsetml(this.tml_wrap_collapse,{idwidget:b.data("widget").id,idcontent:c,lang:lang.widgetlang}))}var e=this;a.one("click.widget",function(){var a=d(this);switch(a.data("span").data("widget").type){case "inline":e.addinline(a);
break;case "ajax":e.load(a)}return!1})},load:function(a){var b=a.data("span").data("widget"),c=this;d.get(ltoptions.url+"/getwidget.htm",{id:b.id,sidebar:b.sidebar,themename:ltoptions.theme.name,idurl:ltoptions.idurl},function(d){b.html=d;b.comment=a.findcomment(b.id);c.add(a)},"html")},addinline:function(a){var b=a.data("span").data("widget");b.comment=a.findcomment(!1);if(!b.comment)return alert("Widget content not found");b.html=b.comment.nodeValue;this.add(a)},add:function(a){var b=a.data("span"),
c=b.data("widget");switch(a.attr("data-model")){case "dropdown":c.body=d(c.comment).replaceComment(c.html);c.comment=!1;a.dropdown("toggle");break;case "widget-collapse":c.body=d(c.comment).replaceComment(c.html);c.comment=!1;b="widget-content-"+c.id;d("#"+b).addClass("in").attr("aria-expanded",!0);a.find("a").removeClass("collapsed").attr("data-toggle","collapse").attr("data-parent","#"+a.closest(".panel-group").attr("id")).attr("data-target","#"+b).attr("aria-controls",b).attr("aria-expanded",!0).collapse();
break;case "slide":c.body=d(c.comment).replaceComment(c.html);c.comment=!1;this.toggleicon(b);var e=this;a.data("body",c.body).on("click.widget",function(){var a=d(this);e.toggleicon(a.data("span"));a.data("body").slideToggle();return!1});break;case "popover":c.comment&&d(c.comment).remove(),c.comment=!1,b=a.data("span"),this.toggleicon(b),a.popover({title:b.text(),html:c.html,container:"body",placement:a.data("placement"),trigger:"manual"}),e=this,a.on("click.widget",function(){var a=d(this);a.popover("toggle");
e.toggleicon(a.data("span"));return!1})}},toggleicon:function(a){a.find("i").toggleClass(this.toggleclass)}});d.ready2(function(){"dropdown"in d.fn&&(f.widgets=new f.BootstrapWidgets)})})(jQuery,window,document,litepubl);
