/*
  2010 - 2016 Vladimir Yushko http://litepublisher.com/ http://litepublisher.ru/
 @license   https://github.com/litepubl/cms/blob/master/LICENSE.txt MIT
 @link https://github.com/litepubl\cms
 @version 6.15
*/
(function(a){a.closedialog=function(b){a.prettyPhoto.close();a.isFunction(b)&&setTimeout(function(){b()},220)};a.litedialog=a.prettyPhotoDialog=function(b){var c=a.extend({title:"",html:"",width:300,css:!1,open:a.noop,close:a.noop,buttons:[{title:"Ok",click:function(){a.prettyPhoto.close()}}]},b);b="";for(var d=0,e=c.buttons.length;d<e;d++)b+=a.simpletml('<button type="button" class="button pp_dialog_btn_%%index%%" data-index="%%index%%"><span>%%title%%</span></button>',{index:d,title:c.buttons[d].title});
var f=c.css?a('<style type="text/css">'+c.css+"</style>").appendTo("head:first"):!1,d="pp_dialog_id_"+litepubl.guid++,g=a('<div CLASS="HIDDEN" id="'+d+'"></div>').appendTo("body");g.html('<div class="pp_dialog_title"><h3>'+c.title+"</h3></div>"+c.html+'<div class="pp_dialog_buttons">'+b+"</div>");b=a("<div></div>").appendTo("body").hide();e=a("<a title=''></a>").appendTo(b);e.attr("href","#"+d);a(document).off("keydown.prettyphoto");e.prettyPhoto({default_width:c.width,opacity:.6,modal:!0,deeplinking:!1,
keyboard_shortcuts:!1,show_title:!1,social_tools:!1,changepicturecallback:function(){g.remove();a(".pp_close").remove();for(var b=0,d=c.buttons.length;b<d;b++)a(".pp_dialog_btn_"+b).data("index",b).click(c.buttons[b].click);a(".pp_dialog_btn_0").focus();a.isFunction(c.open)&&c.open(a(".pp_inline"))},callback:function(){a(document).off("keydown.onEscape");f&&f.remove();a.isFunction(c.close)&&c.close()}});e.click();b.remove();a.onEscape(a.proxy(a.prettyPhoto.close,a.prettyPhoto));return c}})(jQuery);
