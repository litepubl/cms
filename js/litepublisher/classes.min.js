(function(e){e.classes={items:{},getitem:function(a){return this.items[a]?this.items[a]:!1},addevent:function(a,b,d){if(this.items[b]){var c=this.items[b];c[a]?c[a].push(d):c[a]=[d]}else c={name:b},c[a]=[d],this.items[b]=c},fire:function(a,b,d){if(!a||!a[b])return!1;for(var c=a[b],f=0,e=c.length;f<e;f++)(0,c[f])(d);delete a[b]},getargs:function(a){if("string"==typeof a[0])return{name:a[0],fn:a[1]};if("object"===typeof a[0])for(var b in a[0])return{name:b,fn:a[0][b]};return!1},create:function(){var a=
this.getargs(arguments);if(!a||!a.name||!a.fn)return!1;var b=this.getitem(a.name);b?this.fire(b,"onbefore",a):b=this.items[a.name]={};b.instance=new a.fn;this.fire(b,"oninit",b.instance);return b.instance},onbefore:function(){var a=this.getargs(arguments);a&&a.name&&this.addevent("onbefore",a.name,a.fn)},oninit:function(){var a=this.getargs(arguments);if(!a||!a.name)return!1;var b=this.items[a.name];if(b&&b.instance)return a.fn(b.instance);this.addevent("oninit",a.name,a.fn)}}})(window);
