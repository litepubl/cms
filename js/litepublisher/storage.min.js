(function(d,g,c){litepubl.Storage=Class.extend({local:!1,session:!1,global:!1,link:!1,png:!1,enabled:!1,init:function(){if("localStorage"in c)try{c.localStorage.setItem("litepubl_test","testvalue"),c.localStorage.removeItem("litepubl_test"),this.local=!0}catch(a){}if("sessionStorage"in c)try{c.sessionStorage.setItem("litepubl_test","testvalue"),c.sessionStorage.removeItem("litepubl_test"),this.session=!0}catch(b){}if("globalStorage"in c)try{if(c.globalStorage){var e=c.globalStorage["localhost"==c.location.hostname?
"localhost.localdomain":c.location.hostname];e.setItem("litepubl_test","testvalue");e.removeItem("litepubl_test");this.global=e}}catch(d){}try{var f=g.createElement("link");f.addBehavior&&(f.addBehavior("#default#userData"),g.getElementsByTagName("head")[0].appendChild(f),f.load(),this.link=f)}catch(h){}try{g.createElement("canvas").getContext&&(this.png=!0)}catch(k){}this.enabled=this.local||this.session||!!this.global||!!this.link},get:function(a){var b=!1;return this.local&&(b=c.localStorage.getItem(a))||
this.session&&(b=c.sessionStorage.getItem(a))||this.global&&(b=this.global.getItem(a))||this.link&&(this.link.load(),b=this.link.getAttribute(a))?b:!1},set:function(a,b,e){if(e){if(this.local)c.localStorage.setItem(a,b);else if(this.session)c.sessionStorage.setItem(a,b);else if(this.global)this.global.setItem(a,b);else if(this.link)this.link.setAttribute(a,b),this.link.save();else return!1;return!0}this.local&&c.localStorage.setItem(a,b);this.session&&c.sessionStorage.setItem(a,b);this.global&&this.global.setItem(a,
b);this.link&&(this.link.setAttribute(a,b),this.link.save());return this.enabled},remove:function(a){this.local&&c.localStorage.removeItem(name);this.session&&c.sessionStorage.removeItem(name);this.global&&this.global.removeItem(name);this.link&&(this.link.removeAttribute(name),this.link.save());return this.enabled}});litepubl.DataStorage=Class.extend({init:function(){litepubl.getstorage()},get:function(a){var b=litepubl.storage.get(a);b||(b=d.cookie(a));return b?d.parseJSON(b):!1},set:function(a,
b){var c=d.toJSON(b);litepubl.storage.set(a,c,!0)||d.cookie(a,c,{path:"/",expires:3650})},remove:function(a){litepubl.storage.remove(a)||d.cookie(a,!1)}});litepubl.getstorage=function(){return"storage"in litepubl?litepubl.storage:litepubl.storage=new litepubl.Storage}})(jQuery,document,window);
